# RecSync Client - 快速开始指南

## 🚀 5分钟快速上手

### 第一步：选择打包方式

我们推荐使用**绿色免安装版**，因为它更便于部署和使用。

| 特性 | 绿色版 | 安装版 |
|------|--------|--------|
| 安装时间 | 无需安装，解压即用 | 需要运行安装程序 |
| 部署速度 | ⚡ 极快（复制文件夹） | 🐢 较慢（安装过程） |
| 多台电脑 | ✅ 可直接复制 | ❌ 每台都要安装 |
| 卸载 | 直接删除文件夹 | 需要卸载程序 |
| 更新 | 直接替换文件夹 | 需要卸载后重装 |
| **推荐度** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |

### 第二步：构建绿色版

#### Windows 用户（推荐方法）

双击运行：`desktop-client/build-portable.bat`

脚本会自动：
1. 清理旧构建
2. 编译项目
3. 创建绿色版

#### 通用方法（所有平台）

```bash
cd desktop-client
../gradlew jlink
```

### 第三步：运行程序

构建完成后：

**Windows:**
```
desktop-client/build/image/bin/RecSync-Client.bat
```

**macOS/Linux:**
```bash
desktop-client/build/image/bin/RecSync-Client
```

### 第四步：使用摄像头选择功能

1. **启动程序**：程序会自动检测所有可用摄像头
2. **查看列表**：在"相机预览"区域，找到"选择摄像头"下拉框
3. **选择摄像头**：下拉框会显示所有检测到的摄像头（如"摄像头 0", "摄像头 1"）
4. **切换摄像头**：选择想要的摄像头，点击"切换"按钮
5. **预览确认**：预览画面会立即显示新摄像头的内容

**注意事项：**
- ⚠️ 录制过程中无法切换摄像头
- ⚠️ 如果某个摄像头被其他程序占用，切换可能失败

---

## 📦 部署到其他电脑

### 方法1：直接复制（推荐）

1. 将整个 `build/image` 文件夹复制到目标电脑
2. 在目标电脑上运行 `bin/RecSync-Client.bat`
3. 完成！无需任何安装

### 方法2：打包后分发

```bash
# 将 image 文件夹压缩
cd desktop-client/build
zip -r RecSync-Client-Portable.zip image/

# 或使用 tar
tar -czf RecSync-Client-Portable.tar.gz image/
```

然后将压缩包分发给其他用户，解压后直接运行。

---

## 🎨 自定义图标

### 准备图标文件

1. **Windows (.ico)**
   - 尺寸：256x256 像素
   - 格式：ICO
   - 工具：https://www.icoconverter.com/

2. **macOS (.icns)**
   - 尺寸：512x512 像素
   - 格式：ICNS
   - 工具：https://cloudconvert.com/

3. **Linux (.png)**
   - 尺寸：512x512 像素
   - 格式：PNG

### 添加图标

1. 将图标文件重命名为 `icon.ico` (或 `icon.icns` / `icon.png`)
2. 放置到：`desktop-client/src/main/resources/`
3. 重新运行打包命令
4. 新的可执行文件将包含你的自定义图标

---

## 🛠️ 常见问题

### Q1: 打包时提示找不到 Java

**解决方案：**
1. 安装 JDK 17 或更高版本
   - 推荐：Eclipse Temurin (https://adoptium.net/)
2. 设置 JAVA_HOME 环境变量
   ```
   例如：C:\Program Files\Eclipse Adoptium\jdk-17.0.8+7
   ```
3. 将 Java bin 目录添加到 PATH
   ```
   例如：C:\Program Files\Eclipse Adoptium\jdk-17.0.8+7\bin
   ```

### Q2: 检测不到摄像头或下拉框显示"尝试"

**常见原因：**
- 摄像头被其他程序占用（微信、QQ、Zoom等）
- Windows隐私设置阻止访问
- USB连接不稳定
- 摄像头驱动问题

**快速解决：**
1. 关闭所有其他视频会议软件
2. 打开 Windows 设置 → 隐私 → 相机
   - ✅ 允许应用访问相机
   - ✅ **允许桌面应用访问相机**（重要！）
3. 重新插拔USB摄像头
4. 点击应用中的"?"按钮查看详细帮助

**详细解决方案：**
如果问题仍未解决，请查看完整的故障排除指南：
📖 [摄像头故障排除指南](TROUBLESHOOTING_CAMERA.md)

该文档包含：
- 6种主要解决方案
- 3种高级解决方案
- 特定场景处理
- 错误代码解读
- 完整的验证步骤

### Q3: 切换摄像头没有反应

**可能原因：**
1. 正在录制中（录制时不允许切换）
2. 选择的摄像头正在被其他程序使用
3. 选择的摄像头驱动异常

**解决方法：**
- 确保没有在录制
- 关闭其他使用摄像头的程序
- 查看应用日志（控制台输出）

### Q4: 绿色版文件太大

这是正常的！绿色版包含：
- 完整的 JRE（约60-80MB）
- OpenCV 原生库（约100MB）
- FFmpeg 原生库（约80MB）
- 应用程序本身（约20MB）

**总大小：约200-300MB**

这样做的好处是用户无需安装任何依赖，直接运行即可。

### Q5: 如何制作安装版？

如果你确实需要安装版：

1. 安装 WiX Toolset (https://wixtoolset.org/)
2. 将 WiX bin 目录添加到 PATH
3. 运行 `desktop-client/build-installer.bat`

但我们仍然推荐使用绿色版，更灵活方便。

---

## 📊 系统要求

### 最低要求
- **操作系统**：Windows 10 (64位) / macOS 11+ / Ubuntu 20.04+
- **内存**：4GB RAM
- **存储空间**：500MB 可用空间（用于程序本身）
- **摄像头**：支持 DirectShow (Windows) / V4L2 (Linux) / AVFoundation (macOS)

### 推荐配置
- **操作系统**：Windows 11 / macOS 12+ / Ubuntu 22.04+
- **内存**：8GB RAM 或更多
- **存储空间**：5GB+ 可用空间（用于录制视频）
- **网络**：千兆以太网或 5GHz WiFi
- **摄像头**：1080p 30fps 或更高

---

## 🎯 典型使用场景

### 场景1：会议室多机位录制

**设备配置：**
- 1台Leader（控制台电脑）
- 3-5台Client（各个角度的录制电脑）
- 每台电脑连接1个摄像头

**部署步骤：**
1. 在所有Client电脑上复制绿色版
2. 启动所有Client，选择对应的摄像头
3. 在Leader上点击"开始录制"
4. 会议结束后点击"停止录制"
5. Client自动上传视频到Leader

### 场景2：运动赛事录制

**设备配置：**
- 1台Leader（场边笔记本）
- 多台Client（各个角度，可能使用外接USB摄像头）

**摄像头选择优势：**
- 快速测试哪个USB口对应哪个摄像头
- 现场切换不同角度的备用摄像头
- 无需重启程序即可切换设备

### 场景3：教学录制

**设备配置：**
- 1台Leader（教师控制台）
- 2-3台Client（学生视角、教师视角、板书视角）

**使用技巧：**
- 提前测试所有摄像头
- 使用设备名称标识功能（在Leader端查看）
- 课程结束后统一收集视频

---

## 📝 下一步

- 阅读完整文档：`PACKAGING.md`
- 查看更新日志：`CHANGELOG.md`
- 了解整体架构：`README.md`
- 开始录制：启动Leader和Client，享受同步录制！

---

## 💡 专业提示

1. **测试先行**：正式录制前，先进行5-10秒的测试录制
2. **网络稳定**：尽量使用有线网络或高质量WiFi
3. **存储充足**：确保所有设备有足够的存储空间
4. **摄像头预热**：启动程序后等待10秒，让摄像头稳定
5. **批量部署**：使用脚本或批处理自动化部署到多台电脑

**祝你录制顺利！🎬**
